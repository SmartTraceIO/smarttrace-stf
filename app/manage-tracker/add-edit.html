    <div class="portlet box green">
        <div class="portlet-title">
            <div class="caption">
                <img style="margin-top:-8px" src="theme/img/headerTrackers.png" /> {{Action}}&nbsp;Tracker Details
            </div>
            <div class="tools hidden-print">
                <button class="btn default btn-sm uppercase" type="button" ng-click="Print()">Print</button>
            </div>
        </div>
        <div class="portlet-body">
            <div class="row">
                <div class="col-sm-12">
                    <h3>Tracker Details</h3>
                </div>
            </div>
            <div class="row"><hr/></div>
            <div class="row"> <!--Tracker details-->
                <div class="col-sm-2">
                    <div class="form-group"  ng-if="Action=='Edit'">
                        <label for="trackerNumEdit">Tracker Num
                            <i uib-tooltip="The unique 6 digit number of this tracker"
                               tooltip-append-to-body="true"
                               tooltip-trigger="mouseenter"
                               tooltip-placement="top"
                               class="fa fa-info-circle"></i>
                        </label>
                        <span class="text-error pull-right">*</span>
                        <input readonly ng-model="tracker.sn"
                               type="text" id="trackerNumEdit"
                               class="form-control" placeholder="Tracker Number">
                    </div>
                    <div class="form-group" ng-if="Action=='Add'" ng-form="ngfTrackerNum">
                        <label for="trackerNumAdd">Tracker Num
                            <i uib-tooltip="The unique 6 digit number of this tracker"
                               tooltip-append-to-body="true"
                               tooltip-trigger="mouseenter"
                               tooltip-placement="top"
                               class="fa fa-info-circle"></i>
                        </label>
                        <span class="text-error pull-right">*</span>
                        <input ng-model="tracker.sn"
                               minlength="6" maxlength="6"
                               ng-required="true"
                               type="number"
                               name="trackerSN"
                               id="trackerNumAdd"
                               class="form-control"
                               placeholder="Tracker Number">
                        <div role="alert">
                            <span class="text-danger" ng-show="ngfTrackerNum.trackerSN.$touched && ngfTrackerNum.trackerSN.$invalid">The field is required and length 6</span>
                        </div>
                    </div>
                </div>
                <div class="col-sm-1">
                    <!--color here-->
                    <div class="form-group">
                        <label>
                            <span>Color</span>
                            <i uib-tooltip="The color assigned to this device. Empty means no color assigned."
                               tooltip-append-to-body="true"
                               tooltip-trigger="mouseenter"
                               tooltip-placement="top"
                               class="fa fa-info-circle"></i>
                        </label>
                        <ui-select ng-model="tracker.trackerColor">
                            <ui-select-match>
                                <table>
                                    <tr>
                                        <td>
                                            <div ng-style="{'background-color':$select.selected.code, width:'15px', height:'15px', 'margin-right':'5px'}"></div>
                                        </td>
                                    </tr>
                                </table>
                            </ui-select-match>
                            <ui-select-choices repeat="color in (colors | filter: $select.search)">
                                <table>
                                    <tr>
                                        <td>
                                            <div ng-style="{'background-color':color.code, width:'15px', height:'15px', 'margin-right':'5px'}"></div>
                                        </td>
                                        <td>{{color.name}}</td>
                                    </tr>
                                </table>
                            </ui-select-choices>
                        </ui-select>
                    </div>
                </div>
                <div class="col-sm-3">
                    <div class="form-group" ng-form="ngfTrackerName">
                        <label for="trackerName">Tracker Name
                            <i uib-tooltip="A meaningful name given to this tracker. Can be changed via EDIT button"
                               tooltip-append-to-body="true"
                               tooltip-trigger="mouseenter"
                               tooltip-placement="top"
                               class="fa fa-info-circle"></i>
                        </label>
                        <span class="text-error pull-right">*</span>
                        <input ng-model="tracker.name"
                               ng-required="true"
                               name="trackerName"
                               type="text" id="trackerName"
                               class="form-control"
                               placeholder="Tracker Name">
                        <span class="text-danger" ng-show="ngfTrackerName.trackerName.$touched && ngfTrackerName.trackerName.$invalid">This field is required</span>
                    </div>
                </div>
                <div class="col-sm-3">
                    <div class="form-group">
                        <label for="trackerDesc">Description
                            <i uib-tooltip="Tracker Description"
                               tooltip-append-to-body="true"
                               tooltip-trigger="mouseenter"
                               tooltip-placement="top"
                               class="fa fa-info-circle"></i>
                        </label>
                        <input ng-model="tracker.description" type="text" id="trackerDesc" class="form-control" placeholder="Description">
                    </div>
                </div>
                <div class="col-sm-3">
                    <div class="form-group" ng-if="Action=='Edit'">
                        <label for="trackerImeiEdit">IMEI
                            <i uib-tooltip="Tracker IMEI 15 digits"
                               tooltip-append-to-body="true"
                               tooltip-trigger="mouseenter"
                               tooltip-placement="top"
                               class="fa fa-info-circle"></i>
                        </label>
                        <span class="text-error pull-right">*</span>
                        <input readonly ng-model="tracker.imei" type="text" id="trackerImeiEdit" class="form-control" placeholder="Tracker imei">
                    </div>
                    <div class="form-group" ng-if="Action=='Add'" ng-form="ngfTrackerImei">
                        <label for="trackerImeiAdd">IMEI
                            <i uib-tooltip="Tracker IMEI 15 digits"
                               tooltip-append-to-body="true"
                               tooltip-trigger="mouseenter"
                               tooltip-placement="top"
                               class="fa fa-info-circle"></i>
                        </label>
                        <span class="text-error pull-right">*</span>
                        <input ng-model="tracker.imei"
                               name="trackerImei"
                               ng-required="true"
                               ng-minlength="15"
                               type="number" id="trackerImeiAdd"
                               class="form-control"
                               placeholder="Tracker imei">
                        <span class="text-danger" ng-show="ngfTrackerImei.trackerImei.$touched && ngfTrackerImei.trackerImei.$invalid">This field is required and length is 15</span>
                    </div>
                </div>
            </div>
                <div class="row">
                    <div class="col-sm-4">
                        <div class="form-group">
                            <label for="autoStartTemplate">AutoStart Template
                                <i uib-tooltip="The Autostart Template assigned to this tracker.
                                 An Autostart Template provides default shipment data when a tracker is switched on."
                                   tooltip-append-to-body="true"
                                   tooltip-trigger="mouseenter"
                                   tooltip-placement="top"
                                   class="fa fa-info-circle"></i>
                            </label>
                            <select id="autoStartTemplate"
                                    class="form-control"
                                    ng-options="shipment as shipment.shipmentTemplateName
                                     for shipment in AutoStartShipmentList track by shipment.id"
                                    ng-model="tracker.autoStartShipment">
                            </select>
                        </div>
                    </div>
                </div>
                <div class="container-fluid form-actions text-center">
                    <button class="btn green" ng-click="saveTracker()">Save</button>
                    <button class="btn default" ng-click="confirmCancel()">Cancel</button>
                </div>

                <div class="" ng-if="Action==='Edit'">
                    <div class="row">
                        <div class="col-sm-12">
                            <h3>Last Reading / Latest Shipment</h3>
                        </div>
                    </div>
                    <div class="row"><hr/></div>
                    <div class="row">
                        <div class="col-sm-2">
                            <h5>Last Reading
                                <i uib-tooltip="The time of the last known reading for this tracker."
                                   tooltip-append-to-body="true"
                                   tooltip-trigger="mouseenter"
                                   tooltip-placement="top"
                                   class="fa fa-info-circle"></i>
                            </h5>
                            <span>{{tracker.lastReadingTime}}</span>
                        </div>
                        <div class="col-sm-2">
                            <h5>Temperature
                                <i uib-tooltip="The temperature for this last reading."
                                   tooltip-append-to-body="true"
                                   tooltip-trigger="mouseenter"
                                   tooltip-placement="top"
                                   class="fa fa-info-circle"></i>
                            </h5>
                            <span>{{tracker.lastReadingTemperature}}</span>
                        </div>
                        <div class="col-sm-2">
                            <h5>Battery
                                <i uib-tooltip="The battery level for this last reading"
                                   tooltip-append-to-body="true"
                                   tooltip-trigger="mouseenter"
                                   tooltip-placement="top"
                                   class="fa fa-info-circle"></i>
                            </h5>
                            <span>{{tracker.lastReadingBattery | volt}}</span>
                        </div>
                        <div class="col-sm-2">
                            <h5>Latest Shipment
                                <i uib-tooltip="The Tracker Number and Trip Number of the most recent shipment for this tracker. Click the link to view shipment details."
                                   tooltip-append-to-body="true"
                                   tooltip-trigger="mouseenter"
                                   tooltip-placement="top"
                                   class="fa fa-info-circle"></i>
                            </h5>
                            <span><a ng-href="#/view-shipment-detail?sn={{tracker.sn}}&trip={{tracker.tripCount}}">
                                <!--<u>{{tracker.shipmentNumber}}</u>-->
                                <u>{{tracker.sn}} ({{tracker.tripCount}})</u>
                            </a></span>
                        </div>
                        <div class="col-sm-2">
                            <h5>Shipment Status
                                <i uib-tooltip="The status of this most recent shipment.
                                 An 'InProgress' status is an active shipment with manually entered shipment data.
                                  A 'Default' status is an active shipment generated via an Autostart Template.
                                   An 'Arrived' status is a shipment that has reached its destination.
                                 An 'Ended' status is a shipment that has ended but has no known destination."
                                   tooltip-append-to-body="true"
                                   tooltip-trigger="mouseenter"
                                   tooltip-placement="top"
                                   class="fa fa-info-circle"></i>
                            </h5>
                            <span>{{tracker.shipmentStatus}}</span>
                        </div>
                        <div class="col-sm-2" ng-if="getRole() >= Role.Admin">
                            <button type="button" class="btn"
                                    ng-class="{green:(tracker.shipmentStatus!='Ended' && tracker.shipmentStatus!='Arrived')}"
                                    ng-click="confirmShutdown()">Shutdown Now</button>
                                <i uib-tooltip="Shutdown this device and end the latest shipment."
                                   tooltip-append-to-body="true"
                                   tooltip-trigger="mouseenter"
                                   tooltip-placement="top"
                                   class="fa fa-info-circle"></i>
                        </div>
                    </div>
                    <div ng-if="getRole() >= Role.Admin">
                        <div class="row">
                            <div class="col-sm-12">
                                <h3>Billing</h3>
                            </div>
                        </div>
                        <div class="row"><hr/></div>
                        <div class="row" ng-if="tracker.active">
                            <div class="col-sm-3">
                                <strong>Activated</strong>
                            </div>
                            <!--<div class="col-sm-3">
                                <h5>Activation Date</h5>
                                <span ng-if="tracker.lastUpdateStatusDate">tracker.lastUpdateStatusDate</span>
                            </div>-->
                            <div class="col-sm-2 pull-right">
                                <button class="btn green" ng-click="confirmDeactive(tracker.lastShipmentId)">Deactivate Now</button>
                            </div>
                        </div>
                        <div class="row" ng-if="!tracker.active">
                            <div class="col-sm-3">
                                <strong>Deactivated</strong>
                            </div>
                            <div class="col-sm-3">
                                <h5>Deactivation Date</h5>
                                <span ng-if="tracker.lastUpdateStatusDate">tracker.lastUpdateStatusDate</span>
                            </div>
                            <div class="col-sm-6 pull-right">
                                <span>Please contact <a ng-href="mailto:support@smarttrace.com"><u><strong>support@smartTrace.com.au</strong></u></a> to reactivate this device</span>
                            </div>
                        </div>
                        <div class="row">
                        </div>
                    </div>
                </div>
                <div class="form-actions"></div>
            <!--</div>-->
        </div>
    </div>
    <div class="modal fade" tabindex="-1" id="confirmShutdown" role="dialog">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title">Are you sure want to shut this device down?</h4>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal" aria-label="Close">Cancel</button>
                    <button type="button" class="btn btn-primary" ng-click="shutdownNow()">Ok</button>
                </div>
            </div>
        </div>
    </div>